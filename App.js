/**
 * Sample React Native App
 * https://github.com/facebook/react-native
 *
 * @format
 * @flow
 */

import React, {Fragment, Component} from 'react';
import {
  SafeAreaView,
  StyleSheet,
  ScrollView,
  View,
  TouchableOpacity,
  StatusBar,
} from 'react-native';

import {
  LearnMoreLinks,
  Colors,
  DebugInstructions,
  ReloadInstructions,
} from 'react-native/Libraries/NewAppScreen';
import { Container, Text, Button, Content, Header } from 'native-base';

import Tts from 'react-native-tts';

class App extends Component {
  constructor(props) {
    super(props);

    this.state = {
      isImmersive: true,
      image_link: '',
      pageTitle: '',
      image: null,
      imageTitle: '',
      imageTitleModal: false,

      ...props,
    };
  }

  readme() {
    Tts.getInitStatus().then(
      () => {
        let text = 'или собі дід та баба. Вже й старі стали, а дітей нема. Журяться дід та баба: «Хто нашої й смерті догляне, що в нас дітей нема?» От баба й просить діда:\n' +
            '\n' +
            '— Поїдь, діду, в ліс, вирубай там мені деревинку, та зробимо колисочку, то я положу деревинку в колисочку та й буду колихати; от буде мені хоч забавка!\n' +
            '\n' +
            'Дід спершу не хотів, а баба все просить та просить. Послухався він, поїхав, вирубав деревинку, зробив колисочку... Положила баба ту деревинку в колисочку, колише й пісню співає:\n' +
            '\n' +
            'Люлі-люлі, Телесику,\n' +
            'Наварила кулешику,\n' +
            'Буду тебе годувати.\n' +
            'Колихала-колихала, аж поки полягали вони увечері спати. Встають уранці — аж з тієї деревинки та став синок маленький. Вони так зраділи, що й не сказати! Та й назвали того сина Телесиком.\n' +
            '\n' +
            'Росте той синок й росте — і такий став гарний, що баба з дідом не навтішаються з нього.\n' +
            '\n' +
            'От як підріс він, то й каже:\n' +
            '\n' +
            '— Зробіть мені, тату, золотий човник і срібнеє весельце, буду я рибку ловити та вас годувати!\n' +
            '\n' +
            'От дід зробив золотий човник і срібнеє весельце, спустили на річку, він і поїхав. То оце він їздить по річці, ловить рибку та годує діда й бабу, наловить та віддасть — і знову поїде. А мати йому їсти носить. Та й каже:\n' +
            '\n' +
            '— Гляди ж, сину, як я кликатиму, то пливи до бережка, а як хто чужий, то пливи далі!\n' +
            '\n' +
            'От мати наварила йому снідати, принесла до берега та й кличе:\n' +
            '\n' +
            'Телесику, Телесику!\n' +
            'Приплинь, приплинь до бережка!\n' +
            'Дам я тобі їсти й пити!\n' +
            'Телесик почув.\n' +
            '\n' +
            '— Ближче, ближче, човнику, до бережка! Це ж моя матінка снідати принесла.\n' +
            '\n' +
            'Пливе. Пристав до бережка, наївся, напився, відіпхнув золотий човник срібним весельцем і поплив далі рибку ловити.\n' +
            '\n' +
            'А змія й підслухала, як мати кликала Телесика, та прийшла до берега і давай гукати товстим голосом:\n' +
            '\n' +
            'Телесику, Телесику!\n' +
            'Приплинь, приплинь до бережка!\n' +
            'Дам я тобі їсти й пити!\n' +
            'А він чує.\n' +
            '\n' +
            '— То ж не моєї матінки голос! Пливи, пливи, човнику, далі! Пливи, пливи, човнику, далі!\n' +
            '\n' +
            'Махнув весельцем — човник і поплив. А змія стояла-стояла та й пішла від бережка геть.\n' +
            '\n' +
            'От мати Телесикова наварила йому обідати, понесла до бережка та й кличе:\n' +
            '\n' +
            'Телесику, Телесику!\n' +
            'Приплинь, приплинь до бережка!\n' +
            'Дам я тобі їсти й пити!\n' +
            'Він почув:\n' +
            '\n' +
            '— Ближче, ближче, човнику, до бережка! Це ж моя матінка мені обідати принесла.\n' +
            '\n' +
            'Приплив до бережка, наївся, напився, віддав матері рибку, що наловив, відіпхнув човник і поплив знову.\n' +
            '\n' +
            'А змія приходить до берега та знов товстим голосом:\n' +
            '\n' +
            'Телесику, Телесику!\n' +
            'Приплинь, приплинь до бережка!\n' +
            'Дам я тобі їсти й пити!\n' +
            'А він почув, що не материн голос, та махнув весельцем:\n' +
            '\n' +
            '— Пливи, пливи, човнику, далі! Пливи, пливи, човнику, далі! Човник і поплив далі.\n' +
            '\n' +
            'Змія бачить, що нічого не вдіє, та пішла до коваля:\n' +
            '\n' +
            '— Ковалю, ковалю! Скуй мені такий тоненький голосок, як у Телесикової матері!\n' +
            '\n' +
            'Коваль і скував. Вона пішла до бережка й стала кликати:\n' +
            '\n' +
            'Телесику, Телесику!\n' +
            'Приплинь, приплинь до бережка!\n' +
            'Дам я тобі їсти й пити!\n' +
            'А він думав, що то мати.\n' +
            '\n' +
            '— Ближче, ближче, човнику, до бережка! То ж мені матінка їсти принесла!\n' +
            '\n' +
            'Та й приплив до бережка. А змія його мерщій ухопила з човна та й понесла до своєї хати.\n' +
            '\n' +
            '— Зміючко Оленко, відчини!\n' +
            '\n' +
            'Оленка й відчинила, змія ввійшла в хату.\n' +
            '\n' +
            '— Зміючко Оленко, натопи піч так, щоб аж каміння розпадалося, та спечи мені Телесика, а я піду гостей покличу, та будемо гуляти.\n' +
            '\n' +
            'Та й полетіла кликати гостей.\n' +
            '\n' +
            'От Оленка натопила піч так, що аж каміння розпадається а тоді й каже:\n' +
            '\n' +
            '— Сідай, Телесику, на лопату! А він каже:\n' +
            '\n' +
            '— Коли ж я не вмію,— як його сідати?\n' +
            '\n' +
            '— Та вже сідай! — каже Оленка. Він і положив на лопату руку.\n' +
            '\n' +
            '— Так? — каже.\n' +
            '\n' +
            '— Та ні-бо: сідай зовсім! Він положив голову:\n' +
            '\n' +
            '— Отак, може?\n' +
            '\n' +
            '— Та ні-бо, ні! Сідай увесь!\n' +
            '\n' +
            '— А як же? Хіба так? — та й поклав ногу.\n' +
            '\n' +
            '— Та ні-бо,— каже Оленка,— ні, не так!\n' +
            '\n' +
            '— Ну, так покажи ж,— каже Телесик,— бо я не знаю як. Вона й стала показувати, та тільки сіла, а він за лопату та й укинув її в піч, і заслінкою піч затулив, а сам замкнув хату, зліз на превисоченного явора та й сидить. От змія прилітає з гостями.\n' +
            '\n' +
            '— Зміючко Оленко, відчини!\n' +
            '\n' +
            'Не чуть.\n' +
            '\n' +
            '— Зміючко Оленко, відчини!\n' +
            '\n' +
            'Не озивається.\n' +
            '\n' +
            '— От вража Оленка, вже десь повіялась.\n' +
            '\n' +
            'От змія сама відчинила хату, повходили гості, посідали за стіл. Відслонила змія заслінку, вийняла з печі, та й їдять — думали, що то Телесик. Попоїли добре, повиходили надвір та й качаються по траві.\n' +
            '\n' +
            '— Покочуся, повалюся, Телесикового м\'ясця наївшись!\n' +
            '\n' +
            'А Телесик із явора:\n' +
            '\n' +
            '— Покотіться, поваліться, Оленчиного м\'ясця наївшись!\n' +
            '\n' +
            'Вони слухають... Де це? Та знов:\n' +
            '\n' +
            '— Покочуся, повалюся, Телесикового м\'ясця наївшись.\n' +
            '\n' +
            'А він знову:\n' +
            '\n' +
            '— Покотіться, поваліться, Оленчиного м\'ясця наївшись!\n' +
            '\n' +
            'Вони далі:\n' +
            '\n' +
            '— Що воно таке?\n' +
            '\n' +
            'Давай шукати, давай дивитися, та й угледіли Телесика на яворі. Кинулись до явора та й почали його гризти. Гризли-гризли аж зуби поламали, а не перегризуть. Кинулись до коваля:\n' +
            '\n' +
            '— Ковалю-ковалю, покуй нам такі зуби, щоб того явора перегризти!\n' +
            '\n' +
            'Коваль і скував. Вони як почали знову... От-от уже перегризуть. Коли летить табун гусей. Телесик їх і просить:\n' +
            '\n' +
            'Гуси-гуси, гусенята!\n' +
            'Візьміть мене на крилята\n' +
            'Та понесіть до батенька,\n' +
            'А в батенька їсти, й пити,\n' +
            'Ще й хороше походити!\n' +
            'А гуси й кажуть:\n' +
            '\n' +
            '— Нехай тебе середні візьмуть!\n' +
            '\n' +
            'А змії гризуть-гризуть... Аж летить знову табун гусей. Телесик і просить:\n' +
            '\n' +
            'Гуси-гуси, гусенята!\n' +
            'Візьміть мене на крилята\n' +
            'Та понесіть до батенька,\n' +
            'А в батенька їсти, й пити,\n' +
            'Ще й хороше походити!\n' +
            'Так і ці йому кажуть:\n' +
            '\n' +
            '— Нехай тебе задні візьмуть!\n' +
            '\n' +
            'А явір аж тріщить. Відпочинуть змії та й знов гризуть, відпочинуть та й знов... Аж летить іще табун гусей. Телесик так їх просить:\n' +
            '\n' +
            'Гуси-гуси, гусенята!\n' +
            'Візьміть мене на крилята\n' +
            'Та понесіть до батенька,\n' +
            'А в батенька їсти, й пити,\n' +
            'Ще й хороше походити!\n' +
            'І ці кажуть:\n' +
            '\n' +
            '— Нехай тебе заднє візьме!\n' +
            '\n' +
            'Та й полетіли.\n' +
            '\n' +
            'Сидить сердешний Телесик, от-от явір упаде, от-от доведеться пропасти! Коли це летить собі одне гусеня: відбилося — насилу летить, Телесик до нього:\n' +
            '\n' +
            'Гуся-гуся, гусенятко!\n' +
            'Візьми мене на крилятко\n' +
            'Та понеси до батенька,\n' +
            'А в батенька їсти, й пити,\n' +
            'Ще й хороше походити!\n' +
            'От воно:\n' +
            '\n' +
            '— Сідай!— каже та й ухопило його на крила. Та втомилось сердешне, так низько несе. А змія за ним — ледве не вхопить його — женеться. Та таки не наздогнала. От воно принесло та й посадило Телесика на призьбі, а само ходить по двору, пасеться.\n' +
            '\n' +
            'От сидить Телесик на призьбі та й слухає, що в хаті робиться. А баба напекла пиріжків, та виймає в печі, і каже:\n' +
            '\n' +
            '— Це тобі, діду, пиріжок, а це мені пиріжок!\n' +
            '\n' +
            'А Телесик знадвору:\n' +
            '\n' +
            '— А мені?\n' +
            '\n' +
            'То це вона знову виймає пиріжки та:\n' +
            '\n' +
            '— Оце тобі, дідусю, пиріжок, а це мені!\n' +
            '\n' +
            'А Телесик знову:\n' +
            '\n' +
            '— А мені?\n' +
            '\n' +
            'Вони й почули. Що це?\n' +
            '\n' +
            '— Чи ти чуєш, діду, щось наче гукає?\n' +
            '\n' +
            '— Та то,— каже дід,— мабуть, так учувається.\n' +
            '\n' +
            'Та знов баба:\n' +
            '\n' +
            '— Оце тобі, дідусю, пиріжок, а це мені!\n' +
            '\n' +
            '— А мені? — каже з призьби Телесик.\n' +
            '\n' +
            '— Отже, таки озивається! — говорить баба та зирк у вікно — аж на призьбі Телесик. Вони тоді з хати, та вхопили його, та внесли в хату, та такі раді...\n' +
            '\n' +
            'А гусятко ходить по двору, то мати й побачила.\n' +
            '\n' +
            '— Он гусятко ходить. Піду впіймаю та заріжу.\n' +
            '\n' +
            'А Телесик каже:\n' +
            '\n' +
            '— Ні, мамо, не ріжте, а нагодуйте його! Коли б не воно, то я б у вас і не був.\n' +
            '\n' +
            'От вони нагодували його, й напоїли, і під крильця насипали пшона. Так воно й полетіло.\n' +
            '\n' +
            'От вам казочка, а мені бубликів в\'язочка.';

        if (text.length >= 3999) {
          function splitNChars(txt, num) {
            var result = [];
            for (var i = 0; i < txt.length; i += num) {
              result.push(txt.substr(i, num));
            }
            return result;
          }

          var splitMe = splitNChars(text,3999);

          splitMe.forEach(function (value, key) {
            Tts.speak(value, {
              androidParams: {
                KEY_PARAM_STREAM: "STREAM_MUSIC"
              }
            });
          });
        }
        else {
          Tts.stop();
          Tts.speak(text, {
            androidParams: {
              KEY_PARAM_STREAM: "STREAM_MUSIC"
            }
          });
        }
        //Tts.speak(text);
      },
      err => {
        console.log(err);
      },
    );
    //Tts.setDefaultLanguage('ua-UA');

    //Tts.voices().then(voices => console.log(voices));
  }

  stop() {
    Tts.stop();
  }

  render() {
    return (
        <Container>
          <Header/>
          <Content>
            <Text>Open up App.js to start working on your app!</Text>
            <Button onPress={() => this.readme()}><Text>Read</Text></Button>
            <Button onPress={() => this.stop()}><Text>Stop</Text></Button>
          </Content>
        </Container>
    );
  }
}

export default App;
